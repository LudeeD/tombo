{% extends "layout.html" %} {% block navigation %}
<li>
    <a href="/new"><strong>New</strong></a>
</li>
<li><a href="/trending">Trending</a></li>
<li><a href="/categories">Categories</a></li>
<li><a href="/search">Search</a></li>
{% endblock %} {% block user %} {% if user_logged_in %}
<li class="float-right"><a href="/dashboard">Dashboard ü§≠</a></li>
{% else %}
<li class="float-right"><a href="/login">Login</a></li>
<li class="float-right"><a href="/signup">Sign Up</a></li>
{% endif %} {% endblock %} {% block content %}
<header>
    <h1>{{ prompt.row.title }}</h1>
    <p class="text-secondary">
        <!-- <span>Submitted by: <a href="#"></a></span> | -->
        <span
            >Published on:
            <time datetime="2025-05-19T10:30:00"
                >{{ prompt.row.created_at.unwrap() }}</time
            ></span
        >
        |
        <!-- <span>‚≠ê <span id="star-count">420</span></span> -->
    </p>
    <div>
        <strong>Tags:</strong>
        <!-- <code>world-building</code>
        <code>creative-writing</code>
        <code>fantasy</code>
        <code>mystery</code> -->
    </div>
</header>

<div class="float-right">
    <button
        id="copy-btn"
        class="copy-text"
        type="button"
        onclick="copyPrompt()"
    >
        Copy Prompt Text
    </button>
</div>

<pre>
<code id="prompt-text">{{ prompt.row.content }}</code>
</pre>
{% endblock %} {% block script %}
<script>
    // Copy prompt function
    function copyPrompt() {
        const promptTextElement = document.getElementById("prompt-text");
        if (!promptTextElement) {
            console.error("Error: Element with ID 'prompt-text' not found.");
            return;
        }
        const promptText = promptTextElement.innerText;
        const button = document.getElementById("copy-btn");

        if (!button) {
            console.error("Error: Button with ID 'copy-btn' not found.");
            return;
        }

        // Store the original button text to revert to it later
        const originalButtonText = "Copy Prompt Text";

        navigator.clipboard
            .writeText(promptText)
            .then(() => {
                button.innerText = "Copied!"; // Change button text directly

                // The CSS class changes below (e.g., bg-green-100) are likely for a utility CSS framework
                // like Tailwind CSS. They will not have an effect if you are only using classless.css
                // unless you've defined these classes yourself.
                // For visual feedback with classless.css, the text change is the primary method.
                // You could also temporarily change button style using JavaScript if needed:
                // e.g., button.style.color = 'var(--cemph)'; // Using a color from classless.css

                // Example of adding and removing Tailwind-like classes (will only work if defined)
                // button.classList.add("bg-green-100", "text-green-700");
                // button.classList.remove("bg-stone-200", "text-stone-700");

                setTimeout(() => {
                    button.innerText = originalButtonText; // Revert button text
                    // button.style.color = ''; // Reset custom style if applied
                    // button.classList.remove("bg-green-100", "text-green-700");
                    // button.classList.add("bg-stone-200", "text-stone-700");
                }, 2000); // Revert after 2 seconds
            })
            .catch((err) => {
                console.error("Failed to copy text: ", err);
                button.innerText = "Error!"; // Show error message on button
                setTimeout(() => {
                    button.innerText = originalButtonText; // Revert button text
                }, 2000);
            });
    }
</script>
{% endblock %}
